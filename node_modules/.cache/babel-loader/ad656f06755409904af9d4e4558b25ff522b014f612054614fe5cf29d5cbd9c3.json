{"ast":null,"code":"var _jsxFileName = \"/Users/shaylavi/Desktop/bstore/src/components/cart.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { ShopContext } from \"../context/shop-context\";\nimport { CartItem } from \"./cart-item\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./cart.css\";\nimport Navbar from \"./navbar\";\nimport { PayPalButton } from 'react-paypal-button-v2';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Cart = () => {\n  _s();\n  const {\n    cartItems,\n    products\n  } = useContext(ShopContext);\n  const [buyprod, setBuyprod] = useState([]);\n  const [dataLoaded, setDataLoaded] = useState(false);\n  const [subtotal, setSubtotal] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const purchasedProducts = products.filter(product => cartItems.hasOwnProperty(product.prod_id) && cartItems[product.prod_id] > 0);\n    setBuyprod(purchasedProducts);\n    let total = 0;\n    purchasedProducts.forEach(product => {\n      total += product.price * cartItems[product.prod_id];\n    });\n    setSubtotal(total);\n    setDataLoaded(true);\n    setLoading(false);\n  }, [cartItems, products]);\n  const handleCheckout = () => {\n    if (dataLoaded) {\n      navigate('/checkout', {\n        state: {\n          buyprod\n        }\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Your Cart Items\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart\",\n        children: buyprod.map(product => /*#__PURE__*/_jsxDEV(CartItem, {\n          data: product,\n          quantity: 1\n        }, product.prod_id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), buyprod.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"checkout\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Subtotal: $\", subtotal.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buttons-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"continue-shopping\",\n            onClick: () => navigate(\"/shop\"),\n            children: \"Continue Shopping\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"checkout-button\",\n            onClick: handleCheckout,\n            children: \"Checkout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Loading PayPal Button...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(PayPalButton, {\n          amount: subtotal.toFixed(2),\n          currency: \"USD\",\n          onSuccess: (details, data) => {\n            alert(\"Transaction completed by \" + details.payer.name.given_name);\n          },\n          onError: error => {\n            console.error(\"PayPal Error:\", error);\n            alert(\"An error occurred while processing your payment. Please try again later.\");\n          },\n          options: {\n            clientId: \"AUw64R1RHWdRKv_e7P92hTsbT9gA8L5HZVFjhG-qM0jUhpYqFmj3B2XImLaftht90qgxQTZFzRH1rXML\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Your Shopping Cart is Empty\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n};\n_s(Cart, \"lCD6vmMwJu8HLPHb0gsX2teuNlg=\", false, function () {\n  return [useNavigate];\n});\n_c = Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["React","useContext","useEffect","useState","ShopContext","CartItem","useNavigate","Navbar","PayPalButton","jsxDEV","_jsxDEV","Cart","_s","cartItems","products","buyprod","setBuyprod","dataLoaded","setDataLoaded","subtotal","setSubtotal","loading","setLoading","navigate","purchasedProducts","filter","product","hasOwnProperty","prod_id","total","forEach","price","handleCheckout","state","children","fileName","_jsxFileName","lineNumber","columnNumber","className","map","data","quantity","length","toFixed","onClick","amount","currency","onSuccess","details","alert","payer","name","given_name","onError","error","console","options","clientId","_c","$RefreshReg$"],"sources":["/Users/shaylavi/Desktop/bstore/src/components/cart.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { ShopContext } from \"../context/shop-context\";\nimport { CartItem } from \"./cart-item\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./cart.css\";\nimport Navbar from \"./navbar\";\nimport { PayPalButton } from 'react-paypal-button-v2';\n\nexport const Cart = () => {\n  const { cartItems, products } = useContext(ShopContext);\n  const [buyprod, setBuyprod] = useState([]);\n  const [dataLoaded, setDataLoaded] = useState(false);\n  const [subtotal, setSubtotal] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const purchasedProducts = products.filter((product) => cartItems.hasOwnProperty(product.prod_id) && cartItems[product.prod_id] > 0);\n    setBuyprod(purchasedProducts);\n    \n    let total = 0;\n    purchasedProducts.forEach((product) => {\n      total += product.price * cartItems[product.prod_id];\n    });\n    setSubtotal(total);\n\n    setDataLoaded(true);\n    setLoading(false);\n  }, [cartItems, products]);\n  \n  const handleCheckout = () => {\n    if (dataLoaded) {\n      navigate('/checkout', { state: { buyprod } });\n    }\n  };\n\n  return (\n    <div>\n      <Navbar />\n      <div className=\"cart\">\n        <div>\n          <h1>Your Cart Items</h1>\n        </div>\n        <div className=\"cart\">\n          {buyprod.map((product) => (\n            <CartItem data={product} quantity={1} key={product.prod_id} />\n          ))}\n        </div>\n        {buyprod.length > 0 ? (\n          <div className=\"checkout\">\n            <p>Subtotal: ${subtotal.toFixed(2)}</p>\n            <div className=\"buttons-container\">\n              <button className=\"continue-shopping\" onClick={() => navigate(\"/shop\")}>Continue Shopping</button>\n              <button className=\"checkout-button\" onClick={handleCheckout}>Checkout</button>\n            </div>\n            {loading ? (\n              <div>Loading PayPal Button...</div>\n            ) : (\n              <PayPalButton\n                amount={subtotal.toFixed(2)}\n                currency=\"USD\"\n                onSuccess={(details, data) => {\n                  alert(\"Transaction completed by \" + details.payer.name.given_name);\n                }}\n                onError={(error) => {\n                  console.error(\"PayPal Error:\", error);\n                  alert(\"An error occurred while processing your payment. Please try again later.\");\n                }}\n                options={{\n                  clientId: \"AUw64R1RHWdRKv_e7P92hTsbT9gA8L5HZVFjhG-qM0jUhpYqFmj3B2XImLaftht90qgxQTZFzRH1rXML\"\n                }}\n              />\n            )}\n          </div>\n        ) : (\n          <h1>Your Shopping Cart is Empty</h1>\n        )}\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}